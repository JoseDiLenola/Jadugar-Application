# @jadugar/ui Internationalization System

This document specifies the internationalization (i18n) system implementation for the Jadugar UI package. The i18n system provides comprehensive support for multiple languages, locales, and cultural adaptations.

## I18n Architecture

### I18n Manager

```typescript
interface I18nOptions {
  defaultLocale?: string;
  fallbackLocale?: string;
  loadPath?: string;
  plugins?: I18nPlugin[];
}

class I18nManager {
  constructor(options: I18nOptions);
  
  // I18n Operations
  translate(key: string, options?: TranslateOptions): string;
  setLocale(locale: string): Promise<void>;
  
  // Resource Management
  loadNamespace(namespace: string): Promise<void>;
  addResources(locale: string, resources: Resources): void;
  
  // Configuration
  configure(options: I18nOptions): void;
  getConfig(): I18nConfig;
}
```

## Translation System

### Translation Manager

```typescript
interface TranslationOptions {
  interpolation?: InterpolationOptions;
  pluralization?: PluralizationOptions;
  formatting?: FormattingOptions;
}

class TranslationManager {
  constructor(options: TranslationOptions);
  
  // Translation Operations
  translate(key: string, values?: Values): string;
  exists(key: string): boolean;
  
  // Resource Management
  add(locale: string, translations: Translations): void;
  remove(locale: string): void;
  
  // Namespace Management
  loadNamespace(namespace: string): Promise<void>;
  unloadNamespace(namespace: string): void;
}
```

### Translation Provider

```typescript
interface TranslationProvider {
  name: string;
  
  // Provider Operations
  load(locale: string, namespace: string): Promise<Translations>;
  save(locale: string, translations: Translations): Promise<void>;
  
  // Provider Management
  configure(options: ProviderOptions): void;
  isAvailable(): boolean;
}
```

## Locale System

### Locale Manager

```typescript
interface LocaleOptions {
  formats?: LocaleFormats;
  fallbacks?: LocaleFallbacks;
  timezone?: string;
}

class LocaleManager {
  constructor(options: LocaleOptions);
  
  // Locale Operations
  setLocale(locale: string): void;
  getLocale(): string;
  
  // Format Operations
  formatNumber(value: number, options?: NumberFormatOptions): string;
  formatDate(value: Date, options?: DateFormatOptions): string;
  formatCurrency(value: number, currency: string): string;
}
```

### Locale Data

```typescript
interface LocaleData {
  // Number Formats
  numbers: {
    decimal: string;
    group: string;
    patterns: NumberPatterns;
    currencies: CurrencyFormats;
  };
  
  // Date Formats
  dates: {
    calendar: CalendarData;
    formats: DateFormats;
    timeZones: TimeZoneData;
  };
  
  // Other Formats
  collation: CollationData;
  plurals: PluralRules;
}
```

## Message Formatting

### Message Formatter

```typescript
interface FormatterOptions {
  locale?: string;
  formats?: CustomFormats;
  cache?: boolean;
}

class MessageFormatter {
  constructor(options: FormatterOptions);
  
  // Formatting Operations
  format(message: string, values?: Values): string;
  compile(message: string): CompiledMessage;
  
  // Format Management
  addFormat(name: string, format: Format): void;
  removeFormat(name: string): void;
}
```

### Format Types

```typescript
interface NumberFormat {
  style?: 'decimal' | 'currency' | 'percent';
  minimumFractionDigits?: number;
  maximumFractionDigits?: number;
  useGrouping?: boolean;
}

interface DateFormat {
  weekday?: 'narrow' | 'short' | 'long';
  era?: 'narrow' | 'short' | 'long';
  year?: 'numeric' | '2-digit';
  month?: 'numeric' | '2-digit' | 'narrow' | 'short' | 'long';
  day?: 'numeric' | '2-digit';
}
```

## Pluralization

### Plural System

```typescript
interface PluralOptions {
  rules?: PluralRules;
  cardinals?: boolean;
  ordinals?: boolean;
}

class PluralManager {
  constructor(options: PluralOptions);
  
  // Plural Operations
  select(count: number, forms: string[]): string;
  getCategory(count: number): PluralCategory;
  
  // Rule Management
  addRule(locale: string, rule: PluralRule): void;
  removeRule(locale: string): void;
}
```

### Plural Rules

```typescript
interface PluralRule {
  locale: string;
  cardinals?: PluralForms;
  ordinals?: PluralForms;
  
  // Rule Operations
  evaluate(count: number): PluralCategory;
  matches(locale: string): boolean;
}
```

## RTL Support

### RTL System

```typescript
interface RTLOptions {
  defaultDirection?: 'ltr' | 'rtl';
  autoDetect?: boolean;
}

class RTLManager {
  constructor(options: RTLOptions);
  
  // Direction Operations
  setDirection(direction: 'ltr' | 'rtl'): void;
  getDirection(): 'ltr' | 'rtl';
  
  // Element Management
  apply(element: Element): void;
  mirror(value: string): string;
}
```

### RTL Utilities

```typescript
interface RTLUtils {
  // Style Operations
  mirrorStyles(styles: Styles): Styles;
  mirrorValue(value: string, property: string): string;
  
  // Layout Operations
  mirrorFlexDirection(direction: string): string;
  mirrorTransform(transform: string): string;
}
```

## Implementation Notes

1. Translation Management
   - Resource loading
   - Namespace handling
   - Cache management
   - Fallback chains

2. Locale Support
   - Number formatting
   - Date formatting
   - Currency handling
   - Collation rules

3. Message Formatting
   - Interpolation
   - Pluralization
   - Nested translations
   - Format caching

4. RTL Support
   - Direction detection
   - Style mirroring
   - Layout adaptation
   - Component updates

5. Best Practices
   - Key structure
   - Context handling
   - Performance optimization
   - Memory management

## Testing Requirements

1. Translation Tests
   - Key resolution
   - Interpolation
   - Pluralization
   - Formatting

2. Locale Tests
   - Number formats
   - Date formats
   - Currency formats
   - Collation order

3. RTL Tests
   - Direction switching
   - Style mirroring
   - Layout adaptation
   - Component rendering

4. Integration Tests
   - Resource loading
   - Locale switching
   - Format application
   - Error handling

## Usage Examples

### Basic Translation

```typescript
const i18n = new I18nManager({
  defaultLocale: 'en',
  fallbackLocale: 'en'
});

// Add translations
i18n.addResources('en', {
  greeting: 'Hello, {{name}}!',
  items: {
    one: '{{count}} item',
    other: '{{count}} items'
  }
});

// Use translations
const message = i18n.translate('greeting', {
  name: 'World'
}); // "Hello, World!"

const items = i18n.translate('items', {
  count: 2
}); // "2 items"
```

### Number Formatting

```typescript
const locale = new LocaleManager({
  formats: {
    number: {
      currency: {
        style: 'currency',
        minimumFractionDigits: 2
      }
    }
  }
});

// Format numbers
const number = locale.formatNumber(1234.5); // "1,234.5"
const currency = locale.formatCurrency(1234.5, 'USD'); // "$1,234.50"
```

### Date Formatting

```typescript
const date = new Date();
const formatted = locale.formatDate(date, {
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric'
}); // "Tuesday, February 6, 2024"
```

### RTL Support

```typescript
const rtl = new RTLManager({
  autoDetect: true
});

// Apply RTL to element
const element = document.getElementById('content');
rtl.apply(element);

// Mirror styles
const styles = {
  marginLeft: '10px',
  paddingRight: '20px',
  textAlign: 'left'
};

const rtlStyles = rtl.mirrorStyles(styles);
// {
//   marginRight: '10px',
//   paddingLeft: '20px',
//   textAlign: 'right'
// }
```
